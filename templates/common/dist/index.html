<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Platform</title>
  {% load static %}
  <link rel="stylesheet" href="../../../static/common/dist/style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<div class="container">
  <div class="bullets">
    <span class="active"></span>
    <span></span>
    <span></span>
  </div>

  <div class="form">
    <!-- 로그인 폼 타이틀 문구 -->
    <div class="title">
      Platform
    </div> 

    <!-- 이메일을 입력받는 부분 -->
    <div class="row visible">
      <input type="text" placeholder="이메일을 입력해주세요." />
      <div class="fa fa-user"></div>
      <div class="nextBtn"><i class="fa fa-chevron-right"></i></div>
    </div>

    <!-- 비밀번호를 입력받는 부분 -->
    <div class="row lastField">
      <input type="password" placeholder="비밀번호를 입력해주세요." />
      <div class="fa fa-key"></div>
      <div class="nextBtn"><i class="fa fa-chevron-right"></i></div>
    </div>

    <!-- 로그인 API 토근 -->
    <div class="login_text">간편 로그인</div>
    <div class="loginAPI_token">

      <!-- 네이버 -->
      <span class="login-area">
        <span id="message">
          <span id="button_area">
            <span id="naverIdLogin"></span>
          </span>
        </span>
      </span>
      <script src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.2.js" charset="utf-8"></script>
      <script type="text/javascript">
      
      const naverLogin = new naver.LoginWithNaverId(
      {
        clientId: "x2OwQmHAMDAXlB3QvDnL",
        callbackUrl: "http://127.0.0.1:8000/home/",
        loginButton: {color: "green", type: 1, height: 40}
        }
      );
      
  
        naverLogin.init();
        naverLogin.getLoginStatus(function (status) {
          if (status) {
              const nickName=naverLogin.user.getNickName();
              const age=naverLogin.user.getAge();
              const birthday=naverLogin.user.getBirthday();
  
              if(nickName===null||nickName===undefined ){
                alert("별명이 필요합니다. 정보제공을 동의해주세요.");
                naverLogin.reprompt();
                return ;  
            }else{
              setLoginStatus();
            }
      }
        });
        console.log(naverLogin);
  
        function setLoginStatus(){
        
          const message_area=document.getElementById('message');
          message_area.innerHTML=`
          <h3> Login 성공 </h3>
          <div>user Nickname : ${naverLogin.user.nickname}</div>
          <div>user Age(범위) : ${naverLogin.user.age}</div>
          <div>user Birthday : ${naverLogin.user.birthday}</div>
          `;
        
          const button_area=document.getElementById('button_area');
          button_area.innerHTML="<button id='btn_logout'>로그아웃</button>";
  
          const logout=document.getElementById('btn_logout');
          logout.addEventListener('click',(e)=>{
            naverLogin.logout();
      location.replace("http://127.0.0.1:8000/home/");
          })
        }
      </script>
  

      <!-- 카카오톡 -->
      <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.0.0/kakao.min.js" 
      integrity="sha384-PFHeU/4gvSH8kpvhrigAPfZGBDPs372JceJq3jAXce11bVA6rMvGWzvP4fMQuBGL" crossorigin="anonymous"></script>
      <script>
        Kakao.init('410bd47035bb782d6bd87e48f7ea5407'); // 사용하려는 앱의 JavaScript 키 입력
      </script>
      <a id="kakao-login-btn" href="javascript:loginWithKakao()">
        <img src="../../../static/common/kakao_login.png" style="height: 40px;"
          alt="카카오 로그인 버튼" />
      </a>
      <p id="token-result"></p>
      <script>
        function loginWithKakao() {
          Kakao.Auth.authorize({
            redirectUri: 'http://127.0.0.1:8000/home/',
          });
        }
      </script>
    </div>

  </div>
</div>

      
      <!-- success 후에 스핀 도는 부분 -->
      <div class="spinnerWrapper" style="display:none;">
        <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
          <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
        </svg>
      </div>
      <!-- partial(부분적인) -->
        {% load static %}
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script><script  src="../../../static/common/dist/script.js"></script>

</body>
</html>
